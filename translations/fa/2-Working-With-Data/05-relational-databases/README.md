<!--
CO_OP_TRANSLATOR_METADATA:
{
  "original_hash": "80d80300002ef4e77cc7631d5904bd6e",
  "translation_date": "2025-10-25T18:36:26+00:00",
  "source_file": "2-Working-With-Data/05-relational-databases/README.md",
  "language_code": "fa"
}
-->
# کار با داده‌ها: پایگاه داده‌های رابطه‌ای

|![طرح‌نگاری توسط [(@sketchthedocs)](https://sketchthedocs.dev) ](../../sketchnotes/05-RelationalData.png)|
|:---:|
| کار با داده‌ها: پایگاه داده‌های رابطه‌ای - _طرح‌نگاری توسط [@nitya](https://twitter.com/nitya)_ |

احتمالاً در گذشته از یک صفحه گسترده برای ذخیره اطلاعات استفاده کرده‌اید. شما مجموعه‌ای از ردیف‌ها و ستون‌ها داشتید که ردیف‌ها شامل اطلاعات (یا داده‌ها) بودند و ستون‌ها توضیحاتی درباره اطلاعات ارائه می‌دادند (گاهی اوقات به آن متاداده گفته می‌شود). یک پایگاه داده رابطه‌ای بر اساس این اصل اساسی ستون‌ها و ردیف‌ها در جداول ساخته شده است و به شما امکان می‌دهد اطلاعات را در چندین جدول پخش کنید. این امر به شما اجازه می‌دهد با داده‌های پیچیده‌تر کار کنید، از تکرار جلوگیری کنید و انعطاف‌پذیری بیشتری در نحوه بررسی داده‌ها داشته باشید. بیایید مفاهیم پایگاه داده رابطه‌ای را بررسی کنیم.

## [آزمون پیش از درس](https://ff-quizzes.netlify.app/en/ds/quiz/8)

## همه چیز از جداول شروع می‌شود

در قلب یک پایگاه داده رابطه‌ای، جداول قرار دارند. درست مانند صفحه گسترده، یک جدول مجموعه‌ای از ستون‌ها و ردیف‌ها است. ردیف شامل داده‌ها یا اطلاعاتی است که می‌خواهیم با آن کار کنیم، مانند نام یک شهر یا میزان بارندگی. ستون‌ها اطلاعات ذخیره شده را توصیف می‌کنند.

بیایید بررسی خود را با ایجاد یک جدول برای ذخیره اطلاعات درباره شهرها شروع کنیم. ممکن است با نام و کشور آن‌ها شروع کنیم. می‌توانید این اطلاعات را در یک جدول به صورت زیر ذخیره کنید:

| شهر      | کشور         |
| -------- | ------------- |
| توکیو    | ژاپن         |
| آتلانتا  | ایالات متحده |
| آوکلند   | نیوزیلند     |

توجه کنید که نام ستون‌های **شهر**، **کشور** و **جمعیت** داده‌های ذخیره شده را توصیف می‌کنند و هر ردیف اطلاعاتی درباره یک شهر دارد.

## محدودیت‌های رویکرد یک جدول

احتمالاً جدول بالا برای شما نسبتاً آشنا به نظر می‌رسد. بیایید شروع کنیم به افزودن داده‌های اضافی به پایگاه داده در حال رشد خود - بارندگی سالانه (بر حسب میلی‌متر). ما بر سال‌های ۲۰۱۸، ۲۰۱۹ و ۲۰۲۰ تمرکز خواهیم کرد. اگر بخواهیم این اطلاعات را برای توکیو اضافه کنیم، ممکن است چیزی شبیه به این باشد:

| شهر   | کشور   | سال  | مقدار |
| ----- | ------- | ---- | ------ |
| توکیو | ژاپن   | ۲۰۲۰ | ۱۶۹۰   |
| توکیو | ژاپن   | ۲۰۱۹ | ۱۸۷۴   |
| توکیو | ژاپن   | ۲۰۱۸ | ۱۴۴۵   |

چه چیزی در مورد جدول ما متوجه می‌شوید؟ ممکن است متوجه شوید که نام و کشور شهر را بارها و بارها تکرار می‌کنیم. این می‌تواند فضای ذخیره‌سازی زیادی را اشغال کند و عمدتاً نیازی به داشتن چندین نسخه از آن نیست. به هر حال، توکیو فقط یک نام دارد که ما به آن علاقه‌مندیم.

خب، بیایید چیز دیگری امتحان کنیم. بیایید ستون‌های جدیدی برای هر سال اضافه کنیم:

| شهر      | کشور         | ۲۰۱۸ | ۲۰۱۹ | ۲۰۲۰ |
| -------- | ------------- | ---- | ---- | ---- |
| توکیو    | ژاپن         | ۱۴۴۵ | ۱۸۷۴ | ۱۶۹۰ |
| آتلانتا  | ایالات متحده | ۱۷۷۹ | ۱۱۱۱ | ۱۶۸۳ |
| آوکلند   | نیوزیلند     | ۱۳۸۶ | ۹۴۲  | ۱۱۷۶ |

در حالی که این روش از تکرار ردیف‌ها جلوگیری می‌کند، چالش‌های دیگری را به همراه دارد. ما باید هر بار که سال جدیدی اضافه می‌شود، ساختار جدول خود را تغییر دهیم. علاوه بر این، با رشد داده‌های ما، داشتن سال‌ها به عنوان ستون‌ها باعث می‌شود که بازیابی و محاسبه مقادیر دشوارتر شود.

به همین دلیل است که ما به چندین جدول و روابط نیاز داریم. با تقسیم داده‌ها، می‌توانیم از تکرار جلوگیری کنیم و انعطاف‌پذیری بیشتری در نحوه کار با داده‌ها داشته باشیم.

## مفاهیم روابط

بیایید به داده‌های خود بازگردیم و تعیین کنیم که چگونه می‌خواهیم آن‌ها را تقسیم کنیم. می‌دانیم که می‌خواهیم نام و کشور شهرها را ذخیره کنیم، بنابراین احتمالاً این اطلاعات در یک جدول بهتر عمل می‌کند.

| شهر      | کشور         |
| -------- | ------------- |
| توکیو    | ژاپن         |
| آتلانتا  | ایالات متحده |
| آوکلند   | نیوزیلند     |

اما قبل از ایجاد جدول بعدی، باید بفهمیم چگونه هر شهر را ارجاع دهیم. ما به نوعی شناسه، ID یا (در اصطلاح پایگاه داده فنی) کلید اصلی نیاز داریم. کلید اصلی مقداری است که برای شناسایی یک ردیف خاص در جدول استفاده می‌شود. در حالی که این مقدار می‌تواند بر اساس یک مقدار خاص باشد (مثلاً می‌توانیم از نام شهر استفاده کنیم)، اما تقریباً همیشه باید یک عدد یا شناسه دیگر باشد. ما نمی‌خواهیم شناسه تغییر کند زیرا این امر رابطه را خراب می‌کند. در بیشتر موارد، کلید اصلی یا شناسه یک عدد خودکار تولید شده خواهد بود.

> ✅ کلید اصلی اغلب به صورت PK خلاصه می‌شود.

### شهرها

| city_id | شهر      | کشور         |
| ------- | -------- | ------------- |
| 1       | توکیو    | ژاپن         |
| 2       | آتلانتا  | ایالات متحده |
| 3       | آوکلند   | نیوزیلند     |

> ✅ متوجه خواهید شد که در طول این درس از اصطلاحات "شناسه" و "کلید اصلی" به صورت متناوب استفاده می‌کنیم. مفاهیم اینجا به DataFrames نیز اعمال می‌شوند که بعداً آن‌ها را بررسی خواهید کرد. DataFrames از اصطلاح "کلید اصلی" استفاده نمی‌کنند، اما متوجه خواهید شد که رفتار مشابهی دارند.

با ایجاد جدول شهرها، بیایید بارندگی را ذخیره کنیم. به جای تکرار اطلاعات کامل درباره شهر، می‌توانیم از شناسه استفاده کنیم. همچنین باید اطمینان حاصل کنیم که جدول تازه ایجاد شده دارای یک ستون *شناسه* نیز باشد، زیرا همه جداول باید یک شناسه یا کلید اصلی داشته باشند.

### بارندگی

| rainfall_id | city_id | سال  | مقدار |
| ----------- | ------- | ---- | ------ |
| 1           | 1       | ۲۰۱۸ | ۱۴۴۵   |
| 2           | 1       | ۲۰۱۹ | ۱۸۷۴   |
| 3           | 1       | ۲۰۲۰ | ۱۶۹۰   |
| 4           | 2       | ۲۰۱۸ | ۱۷۷۹   |
| 5           | 2       | ۲۰۱۹ | ۱۱۱۱   |
| 6           | 2       | ۲۰۲۰ | ۱۶۸۳   |
| 7           | 3       | ۲۰۱۸ | ۱۳۸۶   |
| 8           | 3       | ۲۰۱۹ | ۹۴۲    |
| 9           | 3       | ۲۰۲۰ | ۱۱۷۶   |

توجه کنید به ستون **city_id** در جدول تازه ایجاد شده **بارندگی**. این ستون شامل مقادیری است که به شناسه‌های جدول **شهرها** اشاره می‌کنند. در اصطلاح داده‌های رابطه‌ای فنی، این به عنوان **کلید خارجی** شناخته می‌شود؛ این یک کلید اصلی از جدول دیگر است. شما می‌توانید به سادگی آن را به عنوان یک مرجع یا اشاره‌گر در نظر بگیرید. **city_id** 1 به توکیو اشاره دارد.

> [!NOTE] 
> کلید خارجی اغلب به صورت FK خلاصه می‌شود.

## بازیابی داده‌ها

با جدا کردن داده‌های خود به دو جدول، ممکن است تعجب کنید که چگونه آن‌ها را بازیابی کنیم. اگر از یک پایگاه داده رابطه‌ای مانند MySQL، SQL Server یا Oracle استفاده می‌کنید، می‌توانید از زبانی به نام زبان پرس‌وجوی ساختاریافته یا SQL استفاده کنید. SQL (گاهی اوقات به صورت "سی‌کوئل" تلفظ می‌شود) یک زبان استاندارد است که برای بازیابی و تغییر داده‌ها در یک پایگاه داده رابطه‌ای استفاده می‌شود.

برای بازیابی داده‌ها از دستور `SELECT` استفاده می‌کنید. در اصل، شما ستون‌هایی را که می‌خواهید ببینید **انتخاب** می‌کنید و **از** جدولی که در آن قرار دارند، لیست می‌کنید. اگر بخواهید فقط نام شهرها را نمایش دهید، می‌توانید از دستور زیر استفاده کنید:

```sql
SELECT city
FROM cities;

-- Output:
-- Tokyo
-- Atlanta
-- Auckland
```

`SELECT` جایی است که ستون‌ها را لیست می‌کنید و `FROM` جایی است که جداول را لیست می‌کنید.

> [!NOTE] 
> نحو SQL به حروف بزرگ و کوچک حساس نیست، به این معنی که `select` و `SELECT` یکسان هستند. با این حال، بسته به نوع پایگاه داده‌ای که استفاده می‌کنید، ستون‌ها و جداول ممکن است به حروف بزرگ و کوچک حساس باشند. بنابراین، بهترین روش این است که همیشه همه چیز را در برنامه‌نویسی به صورت حساس به حروف بزرگ و کوچک در نظر بگیرید. هنگام نوشتن پرس‌وجوهای SQL، عرف معمول این است که کلمات کلیدی را با حروف بزرگ بنویسید.

دستور بالا تمام شهرها را نمایش می‌دهد. حالا تصور کنید که فقط می‌خواهیم شهرهای نیوزیلند را نمایش دهیم. ما به نوعی فیلتر نیاز داریم. کلمه کلیدی SQL برای این کار `WHERE` است، یا "جایی که چیزی درست است".

```sql
SELECT city
FROM cities
WHERE country = 'New Zealand';

-- Output:
-- Auckland
```

## اتصال داده‌ها

تا کنون داده‌ها را از یک جدول واحد بازیابی کرده‌ایم. حالا می‌خواهیم داده‌ها را از هر دو جدول **شهرها** و **بارندگی** با هم ترکیب کنیم. این کار با *اتصال* آن‌ها به یکدیگر انجام می‌شود. شما به طور مؤثر یک اتصال بین دو جدول ایجاد می‌کنید و مقادیر یک ستون از هر جدول را با هم مطابقت می‌دهید.

در مثال ما، ستون **city_id** در **بارندگی** را با ستون **city_id** در **شهرها** مطابقت خواهیم داد. این کار مقدار بارندگی را با شهر مربوطه مطابقت می‌دهد. نوع اتصالی که انجام خواهیم داد چیزی است که به عنوان اتصال *داخلی* شناخته می‌شود، به این معنی که اگر هیچ ردیفی با چیزی از جدول دیگر مطابقت نداشته باشد، نمایش داده نمی‌شود. در مورد ما، هر شهر بارندگی دارد، بنابراین همه چیز نمایش داده خواهد شد.

بیایید بارندگی سال ۲۰۱۹ را برای تمام شهرهای خود بازیابی کنیم.

ما این کار را در مراحل انجام خواهیم داد. اولین مرحله اتصال داده‌ها با مشخص کردن ستون‌های اتصال - **city_id** همانطور که قبلاً اشاره شد.

```sql
SELECT cities.city
    rainfall.amount
FROM cities
    INNER JOIN rainfall ON cities.city_id = rainfall.city_id
```

ما ستون‌های مورد نظر و این واقعیت که می‌خواهیم جداول را با **city_id** به هم وصل کنیم، مشخص کرده‌ایم. حالا می‌توانیم عبارت `WHERE` را اضافه کنیم تا فقط سال ۲۰۱۹ را فیلتر کنیم.

```sql
SELECT cities.city
    rainfall.amount
FROM cities
    INNER JOIN rainfall ON cities.city_id = rainfall.city_id
WHERE rainfall.year = 2019

-- Output

-- city     | amount
-- -------- | ------
-- Tokyo    | 1874
-- Atlanta  | 1111
-- Auckland |  942
```

## خلاصه

پایگاه داده‌های رابطه‌ای بر تقسیم اطلاعات بین چندین جدول متمرکز هستند که سپس برای نمایش و تحلیل دوباره به هم متصل می‌شوند. این امر درجه بالایی از انعطاف‌پذیری را برای انجام محاسبات و دستکاری داده‌ها فراهم می‌کند. شما مفاهیم اصلی یک پایگاه داده رابطه‌ای و نحوه انجام اتصال بین دو جدول را مشاهده کردید.

## 🚀 چالش

پایگاه داده‌های رابطه‌ای متعددی در اینترنت موجود هستند. می‌توانید با استفاده از مهارت‌هایی که در بالا یاد گرفته‌اید، داده‌ها را بررسی کنید.

## آزمون پس از درس

## [آزمون پس از درس](https://ff-quizzes.netlify.app/en/ds/quiz/9)

## مرور و مطالعه خودآموز

منابع متعددی در [Microsoft Learn](https://docs.microsoft.com/learn?WT.mc_id=academic-77958-bethanycheum) برای ادامه بررسی مفاهیم SQL و پایگاه داده‌های رابطه‌ای در دسترس شما هستند.

- [توصیف مفاهیم داده‌های رابطه‌ای](https://docs.microsoft.com//learn/modules/describe-concepts-of-relational-data?WT.mc_id=academic-77958-bethanycheum)
- [شروع به کار با پرس‌وجو در Transact-SQL](https://docs.microsoft.com//learn/paths/get-started-querying-with-transact-sql?WT.mc_id=academic-77958-bethanycheum) (Transact-SQL نسخه‌ای از SQL است)
- [محتوای SQL در Microsoft Learn](https://docs.microsoft.com/learn/browse/?products=azure-sql-database%2Csql-server&expanded=azure&WT.mc_id=academic-77958-bethanycheum)

## تکلیف

[عنوان تکلیف](assignment.md)

---

**سلب مسئولیت**:  
این سند با استفاده از سرویس ترجمه هوش مصنوعی [Co-op Translator](https://github.com/Azure/co-op-translator) ترجمه شده است. در حالی که ما تلاش می‌کنیم دقت را حفظ کنیم، لطفاً توجه داشته باشید که ترجمه‌های خودکار ممکن است شامل خطاها یا نادرستی‌ها باشند. سند اصلی به زبان اصلی آن باید به عنوان منبع معتبر در نظر گرفته شود. برای اطلاعات حساس، ترجمه حرفه‌ای انسانی توصیه می‌شود. ما مسئولیتی در قبال سوء تفاهم‌ها یا تفسیرهای نادرست ناشی از استفاده از این ترجمه نداریم.