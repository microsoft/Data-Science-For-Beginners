<!--
CO_OP_TRANSLATOR_METADATA:
{
  "original_hash": "47028abaaafa2bcb1079702d20569066",
  "translation_date": "2025-08-24T13:59:47+00:00",
  "source_file": "3-Data-Visualization/R/11-visualization-proportions/README.md",
  "language_code": "zh"
}
-->
# å¯è§†åŒ–æ¯”ä¾‹

|![ ç”± [(@sketchthedocs)](https://sketchthedocs.dev) ç»˜åˆ¶çš„é€Ÿè®°å›¾ ](../../../sketchnotes/11-Visualizing-Proportions.png)|
|:---:|
|å¯è§†åŒ–æ¯”ä¾‹ - _é€Ÿè®°å›¾ç”± [@nitya](https://twitter.com/nitya) ç»˜åˆ¶_ |

åœ¨æœ¬è¯¾ä¸­ï¼Œæ‚¨å°†ä½¿ç”¨ä¸€ä¸ªä»¥è‡ªç„¶ä¸ºä¸»é¢˜çš„æ•°æ®é›†æ¥å¯è§†åŒ–æ¯”ä¾‹ï¼Œä¾‹å¦‚åœ¨å…³äºè˜‘è‡çš„æ•°æ®é›†ä¸­ï¼Œä¸åŒç§ç±»çš„çœŸèŒæ•°é‡å æ¯”ã€‚è®©æˆ‘ä»¬é€šè¿‡ä¸€ä¸ªæ¥è‡ª Audubon çš„æ•°æ®é›†æ¥æ¢ç´¢è¿™äº›è¿·äººçš„çœŸèŒï¼Œè¯¥æ•°æ®é›†åˆ—å‡ºäº† Agaricus å’Œ Lepiota å®¶æ—ä¸­ 23 ç§æœ‰é³ƒè˜‘è‡çš„è¯¦ç»†ä¿¡æ¯ã€‚æ‚¨å°†å°è¯•ä¸€äº›æœ‰è¶£çš„å¯è§†åŒ–æ–¹å¼ï¼Œä¾‹å¦‚ï¼š

- é¥¼å›¾ ğŸ¥§  
- ç¯å½¢å›¾ ğŸ©  
- åå¤«å›¾ ğŸ§‡  

> ğŸ’¡ å¾®è½¯ç ”ç©¶é™¢çš„ä¸€ä¸ªéå¸¸æœ‰è¶£çš„é¡¹ç›® [Charticulator](https://charticulator.com) æä¾›äº†ä¸€ä¸ªå…è´¹çš„æ‹–æ”¾ç•Œé¢ç”¨äºæ•°æ®å¯è§†åŒ–ã€‚åœ¨ä»–ä»¬çš„ä¸€ä¸ªæ•™ç¨‹ä¸­ä¹Ÿä½¿ç”¨äº†è¿™ä¸ªè˜‘è‡æ•°æ®é›†ï¼å› æ­¤ï¼Œæ‚¨å¯ä»¥ä¸€è¾¹æ¢ç´¢æ•°æ®ï¼Œä¸€è¾¹å­¦ä¹ è¿™ä¸ªå·¥å…·åº“ï¼š[Charticulator æ•™ç¨‹](https://charticulator.com/tutorials/tutorial4.html)ã€‚

## [è¯¾å‰æµ‹éªŒ](https://purple-hill-04aebfb03.1.azurestaticapps.net/quiz/20)

## äº†è§£æ‚¨çš„è˜‘è‡ ğŸ„

è˜‘è‡éå¸¸æœ‰è¶£ã€‚è®©æˆ‘ä»¬å¯¼å…¥ä¸€ä¸ªæ•°æ®é›†æ¥ç ”ç©¶å®ƒä»¬ï¼š

```r
mushrooms = read.csv('../../data/mushrooms.csv')
head(mushrooms)
```  
æ‰“å°å‡ºäº†ä¸€å¼ è¡¨æ ¼ï¼ŒåŒ…å«ä¸€äº›é€‚åˆåˆ†æçš„ä¼˜ç§€æ•°æ®ï¼š  

| ç±»åˆ«       | èŒç›–å½¢çŠ¶ | èŒç›–è¡¨é¢ | èŒç›–é¢œè‰² | æ˜¯å¦æœ‰ç˜€ä¼¤ | æ°”å‘³    | é³ƒé™„ç€æ–¹å¼ | é³ƒé—´è·   | é³ƒå¤§å°   | é³ƒé¢œè‰²   | èŒå½¢çŠ¶     | èŒæ ¹éƒ¨     | èŒç¯ä¸Šè¡¨é¢          | èŒç¯ä¸‹è¡¨é¢          | èŒç¯ä¸Šé¢œè‰²          | èŒç¯ä¸‹é¢œè‰²          | å¹”ç±»å‹   | å¹”é¢œè‰²   | ç¯æ•°é‡   | ç¯ç±»å‹   | å­¢å­å°é¢œè‰²       | ç§ç¾¤æ•°é‡   | æ –æ¯åœ°   |
| --------- | --------- | --------- | --------- | --------- | ------- | ----------- | --------- | --------- | --------- | ----------- | ---------- | ------------------ | ------------------ | ------------------ | ------------------ | --------- | --------- | --------- | --------- | --------------- | --------- | ------- |
| æœ‰æ¯’      | å‡¸å½¢      | å…‰æ»‘      | æ£•è‰²      | æœ‰ç˜€ä¼¤    | åˆºé¼»    | æ¸¸ç¦»        | ç´§å¯†      | çª„        | é»‘è‰²      | æ‰©å¤§        | ç­‰ç²—        | å…‰æ»‘               | å…‰æ»‘               | ç™½è‰²               | ç™½è‰²               | éƒ¨åˆ†      | ç™½è‰²      | ä¸€ä¸ª      | å‚é¥°      | é»‘è‰²             | åˆ†æ•£      | åŸå¸‚     |
| å¯é£Ÿç”¨    | å‡¸å½¢      | å…‰æ»‘      | é»„è‰²      | æœ‰ç˜€ä¼¤    | æä»    | æ¸¸ç¦»        | ç´§å¯†      | å®½        | é»‘è‰²      | æ‰©å¤§        | æ£çŠ¶        | å…‰æ»‘               | å…‰æ»‘               | ç™½è‰²               | ç™½è‰²               | éƒ¨åˆ†      | ç™½è‰²      | ä¸€ä¸ª      | å‚é¥°      | æ£•è‰²             | ä¼—å¤š      | è‰åœ°     |
| å¯é£Ÿç”¨    | é’Ÿå½¢      | å…‰æ»‘      | ç™½è‰²      | æœ‰ç˜€ä¼¤    | èŒ´é¦™    | æ¸¸ç¦»        | ç´§å¯†      | å®½        | æ£•è‰²      | æ‰©å¤§        | æ£çŠ¶        | å…‰æ»‘               | å…‰æ»‘               | ç™½è‰²               | ç™½è‰²               | éƒ¨åˆ†      | ç™½è‰²      | ä¸€ä¸ª      | å‚é¥°      | æ£•è‰²             | ä¼—å¤š      | è‰åŸ     |
| æœ‰æ¯’      | å‡¸å½¢      | é³çŠ¶      | ç™½è‰²      | æœ‰ç˜€ä¼¤    | åˆºé¼»    | æ¸¸ç¦»        | ç´§å¯†      | çª„        | æ£•è‰²      | æ‰©å¤§        | ç­‰ç²—        | å…‰æ»‘               | å…‰æ»‘               | ç™½è‰²               | ç™½è‰²               | éƒ¨åˆ†      | ç™½è‰²      | ä¸€ä¸ª      | å‚é¥°      | é»‘è‰²             | åˆ†æ•£      | åŸå¸‚     |
| å¯é£Ÿç”¨    | å‡¸å½¢      | å…‰æ»‘      | ç»¿è‰²      | æ— ç˜€ä¼¤    | æ— æ°”å‘³  | æ¸¸ç¦»        | æ‹¥æŒ¤      | å®½        | é»‘è‰²      | é”¥å½¢        | ç­‰ç²—        | å…‰æ»‘               | å…‰æ»‘               | ç™½è‰²               | ç™½è‰²               | éƒ¨åˆ†      | ç™½è‰²      | ä¸€ä¸ª      | æ¶ˆå¤±      | æ£•è‰²             | ä¸°å¯Œ      | è‰åœ°     |
| å¯é£Ÿç”¨    | å‡¸å½¢      | é³çŠ¶      | é»„è‰²      | æœ‰ç˜€ä¼¤    | æä»    | æ¸¸ç¦»        | ç´§å¯†      | å®½        | æ£•è‰²      | æ‰©å¤§        | æ£çŠ¶        | å…‰æ»‘               | å…‰æ»‘               | ç™½è‰²               | ç™½è‰²               | éƒ¨åˆ†      | ç™½è‰²      | ä¸€ä¸ª      | å‚é¥°      | é»‘è‰²             | ä¼—å¤š      | è‰åœ°     |

æ‚¨ä¼šç«‹åˆ»æ³¨æ„åˆ°ï¼Œæ‰€æœ‰æ•°æ®éƒ½æ˜¯æ–‡æœ¬æ ¼å¼ã€‚ä¸ºäº†åœ¨å›¾è¡¨ä¸­ä½¿ç”¨è¿™äº›æ•°æ®ï¼Œæ‚¨éœ€è¦å°†å…¶è½¬æ¢ã€‚å®é™…ä¸Šï¼Œå¤§éƒ¨åˆ†æ•°æ®éƒ½ä»¥å¯¹è±¡å½¢å¼è¡¨ç¤ºï¼š

```r
names(mushrooms)
```  

è¾“å‡ºä¸ºï¼š  

```output
[1] "class"                    "cap.shape"               
 [3] "cap.surface"              "cap.color"               
 [5] "bruises"                  "odor"                    
 [7] "gill.attachment"          "gill.spacing"            
 [9] "gill.size"                "gill.color"              
[11] "stalk.shape"              "stalk.root"              
[13] "stalk.surface.above.ring" "stalk.surface.below.ring"
[15] "stalk.color.above.ring"   "stalk.color.below.ring"  
[17] "veil.type"                "veil.color"              
[19] "ring.number"              "ring.type"               
[21] "spore.print.color"        "population"              
[23] "habitat"            
```  
å°†è¿™äº›æ•°æ®è½¬æ¢ï¼Œå°† 'class' åˆ—è½¬ä¸ºç±»åˆ«ï¼š  

```r
library(dplyr)
grouped=mushrooms %>%
  group_by(class) %>%
  summarise(count=n())
```  

ç°åœ¨ï¼Œå¦‚æœæ‰“å°è˜‘è‡æ•°æ®ï¼Œæ‚¨ä¼šçœ‹åˆ°å®ƒå·²æ ¹æ®æœ‰æ¯’/å¯é£Ÿç”¨ç±»åˆ«åˆ†ç»„ï¼š  
```r
View(grouped)
```  

| ç±»åˆ«   | æ•°é‡   |
| --------- | --------- |
| å¯é£Ÿç”¨    | 4208      |
| æœ‰æ¯’      | 3916      |

å¦‚æœæŒ‰ç…§æ­¤è¡¨ä¸­å‘ˆç°çš„é¡ºåºåˆ›å»ºç±»åˆ«æ ‡ç­¾ï¼Œæ‚¨å¯ä»¥ç»˜åˆ¶ä¸€ä¸ªé¥¼å›¾ã€‚

## é¥¼å›¾ï¼

```r
pie(grouped$count,grouped$class, main="Edible?")
```  
ç§ï¼Œä¸€ä¸ªé¥¼å›¾å±•ç¤ºäº†è¿™ä¸¤ç±»è˜‘è‡æ•°æ®çš„æ¯”ä¾‹ã€‚åœ¨è¿™é‡Œï¼Œç¡®ä¿æ ‡ç­¾æ•°ç»„çš„é¡ºåºæ­£ç¡®éå¸¸é‡è¦ï¼Œå› æ­¤åŠ¡å¿…éªŒè¯æ ‡ç­¾çš„æ„å»ºé¡ºåºï¼

![é¥¼å›¾](../../../../../3-Data-Visualization/R/11-visualization-proportions/images/pie1-wb.png)

## ç¯å½¢å›¾ï¼

ç¯å½¢å›¾æ˜¯ä¸€ç§æ›´å…·è§†è§‰å¸å¼•åŠ›çš„é¥¼å›¾ï¼Œå®ƒåœ¨ä¸­é—´æœ‰ä¸€ä¸ªç©ºæ´ã€‚è®©æˆ‘ä»¬ç”¨è¿™ç§æ–¹æ³•æŸ¥çœ‹æ•°æ®ã€‚

çœ‹çœ‹è˜‘è‡ç”Ÿé•¿çš„å„ç§æ –æ¯åœ°ï¼š

```r
library(dplyr)
habitat=mushrooms %>%
  group_by(habitat) %>%
  summarise(count=n())
View(habitat)
```  
è¾“å‡ºä¸ºï¼š  

| æ –æ¯åœ°   | æ•°é‡   |
| --------- | --------- |
| è‰åœ°      | 2148      |
| æ ‘å¶      | 832       |
| è‰åŸ      | 292       |
| å°è·¯      | 1144      |
| åŸå¸‚      | 368       |
| åºŸåœ°      | 192       |
| æœ¨æ      | 3148      |

åœ¨è¿™é‡Œï¼Œæ‚¨å°†æ•°æ®æŒ‰æ –æ¯åœ°åˆ†ç»„ã€‚å…±æœ‰ 7 ä¸ªæ –æ¯åœ°ï¼Œå› æ­¤å°†å®ƒä»¬ç”¨ä½œç¯å½¢å›¾çš„æ ‡ç­¾ï¼š

```r
library(ggplot2)
library(webr)
PieDonut(habitat, aes(habitat, count=count))
```  

![ç¯å½¢å›¾](../../../../../3-Data-Visualization/R/11-visualization-proportions/images/donut-wb.png)  

æ­¤ä»£ç ä½¿ç”¨äº†ä¸¤ä¸ªåº“ - ggplot2 å’Œ webrã€‚é€šè¿‡ webr åº“çš„ PieDonut å‡½æ•°ï¼Œæˆ‘ä»¬å¯ä»¥è½»æ¾åˆ›å»ºç¯å½¢å›¾ï¼

ä»…ä½¿ç”¨ ggplot2 åº“ä¹Ÿå¯ä»¥åœ¨ R ä¸­åˆ¶ä½œç¯å½¢å›¾ã€‚æ‚¨å¯ä»¥åœ¨ [è¿™é‡Œ](https://www.r-graph-gallery.com/128-ring-or-donut-plot.html) å­¦ä¹ æ›´å¤šå†…å®¹å¹¶å°è¯•è‡ªå·±åˆ¶ä½œã€‚

ç°åœ¨æ‚¨çŸ¥é“å¦‚ä½•åˆ†ç»„æ•°æ®å¹¶ä»¥é¥¼å›¾æˆ–ç¯å½¢å›¾æ˜¾ç¤ºï¼Œæ¥ä¸‹æ¥å¯ä»¥å°è¯•å…¶ä»–ç±»å‹çš„å›¾è¡¨ã€‚ä¾‹å¦‚åå¤«å›¾ï¼Œè¿™æ˜¯ä¸€ç§ä¸åŒçš„æ•°é‡å¯è§†åŒ–æ–¹å¼ã€‚

## åå¤«å›¾ï¼

åå¤«å›¾æ˜¯ä¸€ç§ä»¥äºŒç»´æ–¹å—é˜µåˆ—å½¢å¼å¯è§†åŒ–æ•°é‡çš„å›¾è¡¨ã€‚å°è¯•ç”¨æ­¤æ•°æ®é›†å¯è§†åŒ–è˜‘è‡èŒç›–é¢œè‰²çš„ä¸åŒæ•°é‡ã€‚ä¸ºæ­¤ï¼Œæ‚¨éœ€è¦å®‰è£…ä¸€ä¸ªåä¸º [waffle](https://cran.r-project.org/web/packages/waffle/waffle.pdf) çš„è¾…åŠ©åº“ï¼Œå¹¶ä½¿ç”¨å®ƒç”Ÿæˆå¯è§†åŒ–å›¾è¡¨ï¼š

```r
install.packages("waffle", repos = "https://cinc.rud.is")
```  

é€‰æ‹©ä¸€éƒ¨åˆ†æ•°æ®è¿›è¡Œåˆ†ç»„ï¼š  

```r
library(dplyr)
cap_color=mushrooms %>%
  group_by(cap.color) %>%
  summarise(count=n())
View(cap_color)
```  

é€šè¿‡åˆ›å»ºæ ‡ç­¾å¹¶åˆ†ç»„æ•°æ®æ¥ç”Ÿæˆåå¤«å›¾ï¼š  

```r
library(waffle)
names(cap_color$count) = paste0(cap_color$cap.color)
waffle((cap_color$count/10), rows = 7, title = "Waffle Chart")+scale_fill_manual(values=c("brown", "#F0DC82", "#D2691E", "green", 
                                                                                     "pink", "purple", "red", "grey", 
                                                                                     "yellow","white"))
```  

é€šè¿‡åå¤«å›¾ï¼Œæ‚¨å¯ä»¥æ¸…æ¥šåœ°çœ‹åˆ°è˜‘è‡èŒç›–é¢œè‰²çš„æ¯”ä¾‹ã€‚æœ‰è¶£çš„æ˜¯ï¼Œæœ‰è®¸å¤šç»¿è‰²èŒç›–çš„è˜‘è‡ï¼

![åå¤«å›¾](../../../../../3-Data-Visualization/R/11-visualization-proportions/images/waffle.png)

åœ¨æœ¬è¯¾ä¸­ï¼Œæ‚¨å­¦ä¹ äº†ä¸‰ç§å¯è§†åŒ–æ¯”ä¾‹çš„æ–¹æ³•ã€‚é¦–å…ˆï¼Œæ‚¨éœ€è¦å°†æ•°æ®åˆ†ç»„ä¸ºç±»åˆ«ï¼Œç„¶åå†³å®šå“ªç§æ–¹å¼æœ€é€‚åˆå±•ç¤ºæ•°æ®â€”â€”é¥¼å›¾ã€ç¯å½¢å›¾æˆ–åå¤«å›¾ã€‚æ¯ç§æ–¹å¼éƒ½ç›´è§‚ä¸”èƒ½å¿«é€Ÿå‘ˆç°æ•°æ®é›†çš„æ¦‚å†µã€‚

## ğŸš€ æŒ‘æˆ˜

å°è¯•åœ¨ [Charticulator](https://charticulator.com) ä¸­é‡æ–°åˆ›å»ºè¿™äº›æœ‰è¶£çš„å›¾è¡¨ã€‚

## [è¯¾åæµ‹éªŒ](https://purple-hill-04aebfb03.1.azurestaticapps.net/quiz/21)

## å¤ä¹ ä¸è‡ªå­¦

æœ‰æ—¶å¾ˆéš¾å†³å®šä½•æ—¶ä½¿ç”¨é¥¼å›¾ã€ç¯å½¢å›¾æˆ–åå¤«å›¾ã€‚ä»¥ä¸‹æ˜¯ä¸€äº›ç›¸å…³æ–‡ç« ä¾›æ‚¨é˜…è¯»ï¼š  

https://www.beautiful.ai/blog/battle-of-the-charts-pie-chart-vs-donut-chart  

https://medium.com/@hypsypops/pie-chart-vs-donut-chart-showdown-in-the-ring-5d24fd86a9ce  

https://www.mit.edu/~mbarker/formula1/f1help/11-ch-c6.htm  

https://medium.datadriveninvestor.com/data-visualization-done-the-right-way-with-tableau-waffle-chart-fdf2a19be402  

è¿›è¡Œä¸€äº›ç ”ç©¶ï¼Œäº†è§£æ›´å¤šå…³äºå¦‚ä½•åšå‡ºè¿™ç§é€‰æ‹©çš„ä¿¡æ¯ã€‚

## ä½œä¸š

[åœ¨ Excel ä¸­å°è¯•](assignment.md)  

**å…è´£å£°æ˜**ï¼š  
æœ¬æ–‡æ¡£ä½¿ç”¨AIç¿»è¯‘æœåŠ¡[Co-op Translator](https://github.com/Azure/co-op-translator)è¿›è¡Œç¿»è¯‘ã€‚è™½ç„¶æˆ‘ä»¬åŠªåŠ›ç¡®ä¿ç¿»è¯‘çš„å‡†ç¡®æ€§ï¼Œä½†è¯·æ³¨æ„ï¼Œè‡ªåŠ¨ç¿»è¯‘å¯èƒ½åŒ…å«é”™è¯¯æˆ–ä¸å‡†ç¡®ä¹‹å¤„ã€‚åŸå§‹è¯­è¨€çš„æ–‡æ¡£åº”è¢«è§†ä¸ºæƒå¨æ¥æºã€‚å¯¹äºå…³é”®ä¿¡æ¯ï¼Œå»ºè®®ä½¿ç”¨ä¸“ä¸šäººå·¥ç¿»è¯‘ã€‚æˆ‘ä»¬å¯¹å› ä½¿ç”¨æ­¤ç¿»è¯‘è€Œäº§ç”Ÿçš„ä»»ä½•è¯¯è§£æˆ–è¯¯è¯»ä¸æ‰¿æ‹…è´£ä»»ã€‚